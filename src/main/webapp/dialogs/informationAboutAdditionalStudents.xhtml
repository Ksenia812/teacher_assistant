<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
>
    <h:form id="additionalStudentForm" styleClass="edit-form">
        <p:dialog header="#{msg['additional.students']}"
                  widgetVar="amountOfAdditionalStudents"
                  position="center"
                  draggable="false"
                  modal="true"
                  showEffect="fade"
                  hideEffect="fade"
                  resizable="false"
                  fitViewport="true"
                  onHide="PF('amountOfAdditionalStudents').content.empty()"
                  width="50%">

            <p:dataTable id="additionalStudents"
                         var="additionalStudent"
                         value="#{registrationModeBean.additionalStudents}"
                         selection="#{registrationModeBean.selectedStudent}"
                         rowKey="#{additionalStudent.id}"
                         selectionMode="single"
                         sortBy="#{additionalStudent.firstName}"
                         filteredValue="#{registrationModeBean.filteredAllStudents}"
                         emptyMessage="#{msg['label.emptyMessage']}"
            >

                <p:ajax event="filter" update="@this"/>

                <f:facet name="header">
                    #{msg['additional.students']}
                </f:facet>

                <p:column headerText="#{msg['student.info.firstName']}"
                          sortBy="#{additionalStudent.firstName}"
                          filterBy="#{additionalStudent.firstName}"
                          filterMatchMode="contains"
                >
                    <h:outputText value="#{additionalStudent.firstName}"/>
                </p:column>

                <p:column headerText="#{msg['student.info.lastName']}"
                          sortBy="#{additionalStudent.lastName}"
                          filterBy="#{additionalStudent.lastName}"
                          filterMatchMode="contains"
                >
                    <h:outputText value="#{additionalStudent.lastName}"/>
                </p:column>

                <p:column headerText="#{msg['student.info.groups']}"
                          sortBy="#{additionalStudent.groupNames}"
                          filterBy="#{additionalStudent.groupNames}"
                          filterMatchMode="contains"
                >
                    <h:outputText value="#{additionalStudent.groupNames}"/>
                </p:column>

                <!--                <p:ajax event="rowSelect" listener="#{registrationModeBean.selectedStudent}"
                        update=":lessonForm:lastVisitInfo :lessonForm:additionalInfo"/>-->
                <p:ajax event="rowDblselect" listener="#{registrationModeBean.onStudentRowDblClckSelect}"
                        update="@([id$=wrapper])"/>
            </p:dataTable>

            <p:ajax event="close" listener="#{registrationModeBean.exitAdditionalStudentsDialog}"/>
        </p:dialog>
    </h:form>
</ui:composition>
